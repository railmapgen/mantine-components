import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as g}from"./index-0yr9KlQE.js";import{r as f}from"./index-zC88jLnc.js";import{e as M}from"./index-DOlIJ4nj.js";import{M as O}from"./Modal-CTU-Lmnf.js";import{S as $}from"./Stack-Cznp45fG.js";import{T as l}from"./Text-CSOluYSb.js";import{D as P}from"./Divider-DsFbu6T7.js";import{G as U}from"./Group-BytV6m82.js";import{B as A}from"./Button-Yx7TU9Wg.js";import{f as G,u as I,a as W,B as z,b as H,m as J,c as K}from"./factory-DBu1aocQ.js";import{C as V}from"./CloseButton-BLoVBDfI.js";import{u as Q}from"./use-id-Bbj4jMpb.js";import{p as X}from"./polymorphic-factory-Cvo93ihN.js";var S={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const Y=H((t,{radius:s,color:o,variant:r,autoContrast:a})=>{const n=t.variantColorResolver({color:o||t.primaryColor,theme:t,variant:r||"light",autoContrast:a});return{root:{"--alert-radius":s===void 0?void 0:J(s),"--alert-bg":o||r?n.background:void 0,"--alert-color":n.color,"--alert-bd":o||r?n.border:void 0}}}),w=G((t,s)=>{const o=I("Alert",null,t),{classNames:r,className:a,style:n,styles:d,unstyled:c,vars:p,radius:y,color:u,title:m,children:_,id:T,icon:v,withCloseButton:C,onClose:D,closeButtonLabel:L,variant:x,autoContrast:ie,attributes:q,...F}=o,i=W({name:"Alert",classes:S,props:o,className:a,style:n,classNames:r,styles:d,unstyled:c,attributes:q,vars:p,varsResolver:Y}),j=Q(T),R=m&&`${j}-title`||void 0,N=`${j}-body`;return e.jsx(z,{id:j,...i("root",{variant:x}),variant:x,ref:s,...F,role:"alert","aria-describedby":N,"aria-labelledby":R,children:e.jsxs("div",{...i("wrapper"),children:[v&&e.jsx("div",{...i("icon"),children:v}),e.jsxs("div",{...i("body"),children:[m&&e.jsx("div",{...i("title"),"data-with-close-button":C||void 0,children:e.jsx("span",{id:R,...i("label"),children:m})}),_&&e.jsx("div",{id:N,...i("message"),"data-variant":x,children:_})]}),C&&e.jsx(V,{...i("closeButton"),onClick:D,variant:"transparent",size:16,iconSize:16,"aria-label":L,unstyled:c})]})})});w.classes=S;w.displayName="@mantine/core/Alert";var B={root:"m_849cf0da"};const Z={underline:"hover"},b=X((t,s)=>{const{underline:o,className:r,unstyled:a,mod:n,...d}=I("Anchor",Z,t);return e.jsx(l,{component:"a",ref:s,className:K({[B.root]:!a},r),...d,mod:[{underline:o},n],__staticSelector:"Anchor",unstyled:a})});b.classes=B;b.displayName="@mantine/core/Anchor";const ee="_root_13f96_1",oe="_wrapper_13f96_6",re="_body_13f96_11",se="_message_13f96_15",h={root:ee,wrapper:oe,body:re,message:se},te=(t,s,o)=>{const r=new Blob([o],{type:s});ae(t,r)},ae=(t,s)=>{const o=window.URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(o)};function k({opened:t,onClose:s}){const[o,r]=g.useState(!1),a=()=>{r(!0);const n=f.storage.getAll(),c=`${f.getAppName()}_BACKUP_${new Date().toISOString()}.json`;te(c,"application/json",JSON.stringify(n)),f.storage.clear(),setTimeout(()=>{window.location.reload()},2e3)};return e.jsx(O,{opened:t,onClose:s,title:"Warning 警告",centered:!0,children:e.jsxs($,{gap:"sm",children:[e.jsx(l,{children:"Are you sure you want to reset the app? The webpage local storage for this app will be cleared. A copy of the local storage will be downloaded and it may be used for restoration (varies with app)."}),e.jsx(l,{children:"確定重設該應用程式嗎？應用程式的網頁本地儲存將會被清除。本地儲存的副本可供下載及用於復原（因應用程式而異）。"}),e.jsx(l,{children:"确定重置本应用程序吗？应用程序的网页本地存储将会被清除。本地存储的拷贝可供下载以及用于还原（因应用程序而異）。"}),e.jsx(P,{}),e.jsxs(U,{gap:"sm",children:[e.jsx(A,{variant:"default",ml:"auto",children:"Cancel"}),e.jsx(A,{color:"red",onClick:a,loading:o,children:"Confirm and reload"})]})]})})}k.__docgenInfo={description:"",methods:[],displayName:"WarningModal",props:{opened:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function E(t){const{error:s,errorInfo:o,allowReset:r,classNames:a,...n}=t,[d,c]=g.useState(!1),p=m=>e.jsx(b,{component:"button",onClick:()=>c(!0),children:m}),y=f.getAppName(),u=e.jsx(b,{href:`https://github.com/railmapgen/${y==="rmg-home"?"railmapgen.github.io":y}/issues`,target:"_blank",children:"GitHub Issue"});return e.jsxs(w,{variant:"light",color:"red",classNames:{root:h.root,wrapper:h.wrapper,body:h.body,message:h.message,...a},title:"Something went wrong!",icon:e.jsx(M,{}),...n,children:[e.jsxs(l,{children:["Please try to refresh or re-import your configuration files. If the issue still persists, please consider upgrading your browser",r?e.jsxs(e.Fragment,{children:[" or ",p("reset this app")]}):"",". Should you need any help, please contact us by submitting an issue in ",u," with the details shown below."]}),e.jsxs(l,{children:["請嘗試重新整理或重新上載設定檔。如果問題仍然存在，請考慮更新你的瀏覽器",r?e.jsxs(e.Fragment,{children:["或",p("重設該應用程式")]}):"","。如需協助或與我們聯絡，請前往 ",u," 提交一個 Issue 並附以詳細資料。"]}),e.jsxs(l,{children:["请尝试刷新或者重新上传配置文件。如果问题仍然存在，请考虑更新您的浏览器",r?e.jsxs(e.Fragment,{children:["或者",p("重置本应用程序")]}):"","。如需帮助或者联系我们，请前往 ",u," 提交一个 Issue 并附上详细信息。"]}),e.jsxs(l,{component:"details",children:[s==null?void 0:s.toString(),e.jsx("br",{}),o==null?void 0:o.componentStack]}),r&&e.jsx(k,{opened:d,onClose:()=>c(!1)})]})}E.__docgenInfo={description:"",methods:[],displayName:"ErrorDetail",props:{error:{required:!0,tsType:{name:"any"},description:""},errorInfo:{required:!0,tsType:{name:"any"},description:""},allowReset:{required:!1,tsType:{name:"boolean"},description:""}},composes:["AlertProps"]};class ne extends g.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(s,o){this.setState({error:s,errorInfo:o})}render(){const{children:s,suspenseFallback:o,allowReset:r,...a}=this.props;return this.state.hasError?e.jsx(E,{error:this.state.error,errorInfo:this.state.errorInfo,allowReset:r,...a}):o?e.jsx(g.Suspense,{fallback:o,children:s}):s}}ne.__docgenInfo={description:"",methods:[],displayName:"RMErrorBoundary",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},suspenseFallback:{required:!1,tsType:{name:"ReactNode"},description:""},allowReset:{required:!1,tsType:{name:"boolean"},description:""}}};export{ne as R};
