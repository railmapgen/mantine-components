import{j as e}from"./jsx-runtime-CLpGMVip.js";import{r as g}from"./index-B-SYruCi.js";import{r as f}from"./index-DQ-rvyql.js";import{a as $}from"./index-CZobqRy_.js";import{M as F}from"./Modal-DnUJtLvS.js";import{S as M}from"./Stack-DZ7rhZUb.js";import{T as l}from"./Text-BohgbvsN.js";import{D as O}from"./Divider-BPM27AtZ.js";import{G as P}from"./Group-XxZegxkp.js";import{C as U,B as A}from"./Button-DuFAFXpy.js";import{f as G,u as I,a as W,B as z,b as H,k as J,p as K,c as V}from"./polymorphic-factory-Cr1cWWvZ.js";import{u as Q}from"./use-id-CRWUMBvp.js";var S={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const X={},Y=H((t,{radius:r,color:s,variant:o,autoContrast:n})=>{const a=t.variantColorResolver({color:s||t.primaryColor,theme:t,variant:o||"light",autoContrast:n});return{root:{"--alert-radius":r===void 0?void 0:J(r),"--alert-bg":s||o?a.background:void 0,"--alert-color":a.color,"--alert-bd":s||o?a.border:void 0}}}),w=G((t,r)=>{const s=I("Alert",X,t),{classNames:o,className:n,style:a,styles:c,unstyled:d,vars:p,radius:y,color:u,title:m,children:_,id:T,icon:v,withCloseButton:C,onClose:D,closeButtonLabel:L,variant:x,autoContrast:ie,...q}=s,i=W({name:"Alert",classes:S,props:s,className:n,style:a,classNames:o,styles:c,unstyled:d,vars:p,varsResolver:Y}),j=Q(T),R=m&&`${j}-title`||void 0,N=`${j}-body`;return e.jsx(z,{id:j,...i("root",{variant:x}),variant:x,ref:r,...q,role:"alert","aria-describedby":N,"aria-labelledby":R,children:e.jsxs("div",{...i("wrapper"),children:[v&&e.jsx("div",{...i("icon"),children:v}),e.jsxs("div",{...i("body"),children:[m&&e.jsx("div",{...i("title"),"data-with-close-button":C||void 0,children:e.jsx("span",{id:R,...i("label"),children:m})}),_&&e.jsx("div",{id:N,...i("message"),"data-variant":x,children:_})]}),C&&e.jsx(U,{...i("closeButton"),onClick:D,variant:"transparent",size:16,iconSize:16,"aria-label":L,unstyled:d})]})})});w.classes=S;w.displayName="@mantine/core/Alert";var B={root:"m_849cf0da"};const Z={underline:"hover"},b=K((t,r)=>{const{underline:s,className:o,unstyled:n,mod:a,...c}=I("Anchor",Z,t);return e.jsx(l,{component:"a",ref:r,className:V({[B.root]:!n},o),...c,mod:[{underline:s},a],__staticSelector:"Anchor",unstyled:n})});b.classes=B;b.displayName="@mantine/core/Anchor";const ee="_root_13f96_1",se="_wrapper_13f96_6",oe="_body_13f96_11",re="_message_13f96_15",h={root:ee,wrapper:se,body:oe,message:re},te=(t,r,s)=>{const o=new Blob([s],{type:r});ne(t,o)},ne=(t,r)=>{const s=window.URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(s)};function k({opened:t,onClose:r}){const[s,o]=g.useState(!1),n=()=>{o(!0);const a=f.storage.getAll(),d=`${f.getAppName()}_BACKUP_${new Date().toISOString()}.json`;te(d,"application/json",JSON.stringify(a)),f.storage.clear(),setTimeout(()=>{window.location.reload()},2e3)};return e.jsx(F,{opened:t,onClose:r,title:"Warning 警告",centered:!0,children:e.jsxs(M,{gap:"sm",children:[e.jsx(l,{children:"Are you sure you want to reset the app? The webpage local storage for this app will be cleared. A copy of the local storage will be downloaded and it may be used for restoration (varies with app)."}),e.jsx(l,{children:"確定重設該應用程式嗎？應用程式的網頁本地儲存將會被清除。本地儲存的副本可供下載及用於復原（因應用程式而異）。"}),e.jsx(l,{children:"确定重置本应用程序吗？应用程序的网页本地存储将会被清除。本地存储的拷贝可供下载以及用于还原（因应用程序而異）。"}),e.jsx(O,{}),e.jsxs(P,{gap:"sm",children:[e.jsx(A,{variant:"default",ml:"auto",children:"Cancel"}),e.jsx(A,{color:"red",onClick:n,loading:s,children:"Confirm and reload"})]})]})})}k.__docgenInfo={description:"",methods:[],displayName:"WarningModal",props:{opened:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function E(t){const{error:r,errorInfo:s,allowReset:o,classNames:n,...a}=t,[c,d]=g.useState(!1),p=m=>e.jsx(b,{component:"button",onClick:()=>d(!0),children:m}),y=f.getAppName(),u=e.jsx(b,{href:`https://github.com/railmapgen/${y==="rmg-home"?"railmapgen.github.io":y}/issues`,target:"_blank",children:"GitHub Issue"});return e.jsxs(w,{variant:"light",color:"red",classNames:{root:h.root,wrapper:h.wrapper,body:h.body,message:h.message,...n},title:"Something went wrong!",icon:e.jsx($,{}),...a,children:[e.jsxs(l,{children:["Please try to refresh or re-import your configuration files. If the issue still persists, please consider upgrading your browser",o?e.jsxs(e.Fragment,{children:[" or ",p("reset this app")]}):"",". Should you need any help, please contact us by submitting an issue in ",u," with the details shown below."]}),e.jsxs(l,{children:["請嘗試重新整理或重新上載設定檔。如果問題仍然存在，請考慮更新你的瀏覽器",o?e.jsxs(e.Fragment,{children:["或",p("重設該應用程式")]}):"","。如需協助或與我們聯絡，請前往 ",u," 提交一個 Issue 並附以詳細資料。"]}),e.jsxs(l,{children:["请尝试刷新或者重新上传配置文件。如果问题仍然存在，请考虑更新您的浏览器",o?e.jsxs(e.Fragment,{children:["或者",p("重置本应用程序")]}):"","。如需帮助或者联系我们，请前往 ",u," 提交一个 Issue 并附上详细信息。"]}),e.jsxs(l,{component:"details",children:[r==null?void 0:r.toString(),e.jsx("br",{}),s==null?void 0:s.componentStack]}),o&&e.jsx(k,{opened:c,onClose:()=>d(!1)})]})}E.__docgenInfo={description:"",methods:[],displayName:"ErrorDetail",props:{error:{required:!0,tsType:{name:"any"},description:""},errorInfo:{required:!0,tsType:{name:"any"},description:""},allowReset:{required:!1,tsType:{name:"boolean"},description:""}},composes:["AlertProps"]};class ae extends g.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(r,s){this.setState({error:r,errorInfo:s})}render(){const{children:r,suspenseFallback:s,allowReset:o,...n}=this.props;return this.state.hasError?e.jsx(E,{error:this.state.error,errorInfo:this.state.errorInfo,allowReset:o,...n}):s?e.jsx(g.Suspense,{fallback:s,children:r}):r}}ae.__docgenInfo={description:"",methods:[],displayName:"RMErrorBoundary",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},suspenseFallback:{required:!1,tsType:{name:"ReactNode"},description:""},allowReset:{required:!1,tsType:{name:"boolean"},description:""}}};export{ae as R};
